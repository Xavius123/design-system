# Quick Start - Simplified Design System

## What You Have Now

âœ… **Streamlined setup focusing on:**
1. Mitosis components (source of truth)
2. Generated outputs (React, Angular, React Native)
3. Storybook (local preview)

âŒ **Removed:**
- `react-ui` package (deprecated)
- Chromatic integration (simplified)
- Complex multi-Storybook setup

## Daily Workflow

### 1. Edit Mitosis Component

```bash
code packages/mitosis-components/src/components/Button/Button.lite.tsx
```

### 2. Generate All Outputs

```bash
npm run build:mitosis
```

This creates:
- `packages/react/src/components/Button/Button.tsx`
- `packages/angular/src/components/Button/Button.ts`
- `packages/react-native/src/components/Button/Button.tsx`

### 3. Preview in Storybook

```bash
npm run storybook
```

Opens http://localhost:6007 showing all generated React components.

## Repository Structure

```
design-system/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ mitosis-components/       â­ EDIT HERE
â”‚   â”‚   â”œâ”€â”€ src/components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.lite.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Button.module.css
â”‚   â”‚   â”‚   â””â”€â”€ Input/
â”‚   â”‚   â”‚       â”œâ”€â”€ Input.lite.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Input.module.css
â”‚   â”‚   â””â”€â”€ mitosis.config.js
â”‚   â”‚
â”‚   â”œâ”€â”€ tokens/                   ğŸ“¦ PUBLISH
â”‚   â”‚   â””â”€â”€ dist/
â”‚   â”‚
â”‚   â”œâ”€â”€ react/                    ğŸ“¦ PUBLISH (generated)
â”‚   â”‚   â”œâ”€â”€ src/components/       # Generated by Mitosis
â”‚   â”‚   â”œâ”€â”€ stories/              # Storybook
â”‚   â”‚   â””â”€â”€ .storybook/
â”‚   â”‚
â”‚   â”œâ”€â”€ angular/                  ğŸ“¦ PUBLISH (generated)
â”‚   â”‚   â””â”€â”€ src/components/
â”‚   â”‚
â”‚   â””â”€â”€ react-native/             ğŸ“¦ PUBLISH (generated)
â”‚       â””â”€â”€ src/components/
â”‚
â”œâ”€â”€ .changeset/                   # Version management
â”œâ”€â”€ .github/workflows/            # CI/CD
â””â”€â”€ docs/                         # Documentation
```

## Key Commands

| Command | What It Does |
|---------|-------------|
| `npm run build:tokens` | Build design tokens |
| `npm run build:mitosis` | Generate React/Angular/RN |
| `npm run build:all` | Build tokens + Mitosis |
| `npm run storybook` | Preview components |
| `npx changeset` | Create version bump |
| `npm run publish:all` | Publish to npm |

## Current Components

- âœ… **Button** - 4 variants, 3 sizes
- âœ… **Input** - All input types, validation

## Add New Component

### 1. Create Files

```bash
mkdir packages/mitosis-components/src/components/Badge
```

**Badge.lite.tsx:**
```tsx
/** @jsxImportSource @builder.io/mitosis */
import { useStore } from '@builder.io/mitosis';
import styles from './Badge.module.css';

export interface BadgeProps {
  variant?: 'default' | 'success' | 'error';
  children: string;
}

export default function Badge(props: BadgeProps) {
  const state = useStore({
    get variantClass() {
      return styles[props.variant || 'default'];
    },
  });

  return (
    <span class={`${styles.badge} ${state.variantClass}`}>
      {props.children}
    </span>
  );
}
```

**Badge.module.css:**
```css
.badge {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
}

.default {
  background: var(--color-gray-200);
  color: var(--color-gray-800);
}
```

### 2. Generate

```bash
npm run build:mitosis
```

### 3. Add Storybook Story

```tsx
// packages/react/stories/Badge.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import Badge from '../src/components/Badge/Badge';

const meta: Meta<typeof Badge> = {
  title: 'Generated/Badge',
  component: Badge,
};

export default meta;
type Story = StoryObj<typeof Badge>;

export const Default: Story = {
  args: {
    children: 'New',
  },
};
```

### 4. Preview

```bash
npm run storybook
```

### 5. Publish

```bash
npx changeset           # minor bump, "Add Badge component"
npm run version
npm run publish:all
```

## Publishing to NPM

### First Time

```bash
# Login to npm
npm login

# Create changeset
npx changeset
# Select: tokens, react, angular, react-native
# Type: minor
# Summary: "Initial release with Button and Input"

# Apply versions
npm run version

# Publish
npm run publish:all
```

### Subsequent Releases

Just push to main - GitHub Actions handles it:

```bash
git add .
git commit -m "feat: add Badge component"
git push origin main
```

GitHub Actions will:
1. Build tokens + Mitosis
2. Create release PR
3. Auto-publish when merged

## Storybook

**Location:** `packages/react/stories/`

**Current stories:**
- Button.stories.tsx
- Input.stories.tsx

**Config:** `packages/react/.storybook/`

**Run:**
```bash
npm run storybook          # From root
# OR
cd packages/react
npm run storybook          # From package
```

## Generated Output Quality

### React âœ…
- Clean functional components
- TypeScript types
- CSS Modules
- Next.js compatible

### Angular âœ…
- Standalone components
- @Input decorators
- Modern Angular 17+

### React Native âš ï¸
- Basic components
- May need StyleSheet adjustments
- Test in real app

## Tips

### TypeScript Error in .lite.tsx?

Add JSX pragma:
```tsx
/** @jsxImportSource @builder.io/mitosis */
```

### CSS Module Not Found?

Check `packages/mitosis-components/src/types/css-modules.d.ts` exists.

### Build Fails?

```bash
npm run build:tokens
npm run build:mitosis
```

### Want to See Generated Code?

```bash
# React
cat packages/react/src/components/Button/Button.tsx

# Angular
cat packages/angular/src/components/Button/Button.ts

# React Native
cat packages/react-native/src/components/Button/Button.tsx
```

## Package Versions

All packages use synchronized versions:

```json
{
  "@redhorn/design-tokens": "1.0.0",
  "@redhorn/react": "1.0.0",
  "@redhorn/angular": "1.0.0",
  "@redhorn/react-native": "1.0.0"
}
```

Bump together using Changesets.

## Documentation

- **[SIMPLIFIED_SETUP.md](SIMPLIFIED_SETUP.md)** - Detailed setup guide
- **[docs/MITOSIS_GUIDELINES.md](docs/MITOSIS_GUIDELINES.md)** - Component patterns
- **[docs/APP_INTEGRATION_GUIDE.md](docs/APP_INTEGRATION_GUIDE.md)** - App usage
- **[docs/PUBLISHING_GUIDE.md](docs/PUBLISHING_GUIDE.md)** - Release process

## What's Published to npm

```
@redhorn/design-tokens     (tokens package)
@redhorn/react             (generated React)
@redhorn/angular           (generated Angular)
@redhorn/react-native      (generated React Native)
```

## What Stays Private

```
packages/mitosis-components/    (source code)
packages/core/                  (internal utils)
packages/react/stories/         (Storybook)
```

## Flow

```
Edit .lite.tsx â†’ npm run build:mitosis â†’ Preview Storybook â†’ Publish npm
```

## Status

âœ… Ready to develop components  
âœ… Ready to publish to npm  
âœ… Ready to roll out to apps

## Next Steps

1. **Add more components** - Checkbox, Radio, Badge
2. **Publish v1.0.0** - `npx changeset && npm run publish:all`
3. **Start pilot** - Install in 1 React app
4. **Iterate** - Add 3-5 components per week

---

**Focus:** Write once in Mitosis, deploy to 3 frameworks, preview locally, publish to npm.
