import { Meta } from '@storybook/blocks';

<Meta title="React Native/Getting Started" />

# React Native UI Library

Guide for developing React Native components based on the web UI library.

## Overview

The `@toyota/react-native-ui` package provides React Native components that mirror the web components in `@toyota/react-ui`. They share the same design tokens and use the same enums/types from `@toyota/core`.

## Workflow

This design system is built with a **web-first** approach:

1. **Web Team** builds components in `@toyota/react-ui`
2. **RN Team** follows and translates to `@toyota/react-native-ui`
3. **AI assists** the RN team using component metadata

## Package Structure

```
packages/
â”œâ”€â”€ design-tokens/      # Shared design tokens (CSS + JS)
â”œâ”€â”€ core/              # Shared types, enums, metadata
â”œâ”€â”€ react-ui/          # Web components (Storybook here)
â””â”€â”€ react-native-ui/   # React Native components
```

## Installation

```bash
# In your React Native app
npm install @toyota/react-native-ui @toyota/design-tokens @toyota/core
```

## Using Components

### Basic Usage

```jsx
import React from 'react';
import { View } from 'react-native';
import { Button } from '@toyota/react-native-ui';
import { ButtonVariant, ComponentSize } from '@toyota/core';

export const MyScreen = () => {
  const handlePress = () => {
    console.log('Button pressed!');
  };

  return (
    <View>
      <Button
        variant={ButtonVariant.Primary}
        size={ComponentSize.Medium}
        onPress={handlePress}
      >
        Click Me
      </Button>
    </View>
  );
};
```

### With Design Tokens

```jsx
import React from 'react';
import { View, Text, StyleSheet } from 'react-native';
import { lightTokens } from '@toyota/design-tokens/js/light';
import { Button } from '@toyota/react-native-ui';

const styles = StyleSheet.create({
  container: {
    padding: parseInt(lightTokens.spacing.xl),
    backgroundColor: lightTokens.color.background,
  },
  title: {
    fontSize: parseInt(lightTokens.typography.fontSize.h1),
    fontWeight: lightTokens.typography.fontWeight.bold,
    color: lightTokens.color.text.primary,
    marginBottom: parseInt(lightTokens.spacing.lg),
  },
});

export const MyScreen = () => (
  <View style={styles.container}>
    <Text style={styles.title}>Welcome</Text>
    <Button variant="primary">Get Started</Button>
  </View>
);
```

## Available Components

| Component | Status | Description |
|-----------|--------|-------------|
| Button | âœ… Available | Primary interactive element |
| Input | ðŸš§ Coming | Text input field |
| Checkbox | ðŸš§ Coming | Checkbox with label |

## Development Guide

### For React Native Developers

When building RN components based on web components:

1. **Read the metadata** in `@toyota/core/metadata`
2. **Check web implementation** in Storybook
3. **Use shared enums/types** from `@toyota/core`
4. **Import design tokens** from `@toyota/design-tokens/js`

### Component Translation Example

#### 1. Read the Metadata

```typescript
import { ButtonMetadata } from '@toyota/core';

console.log(ButtonMetadata.conversionNotes);
// ["Replace onClick with onPress", "Replace button element with Pressable", ...]

console.log(ButtonMetadata.stateMapping.hover);
// { web: ':hover CSS pseudo-class', native: 'onPressIn/onPressOut callbacks' }
```

#### 2. Check Web Implementation

Look at the web component in Storybook:

```tsx
// Web Button (packages/react-ui/src/components/Button/Button.tsx)
const Button: React.FC<ButtonProps> = ({
  variant = ButtonVariant.Primary,
  size = ComponentSize.Medium,
  disabled = false,
  onClick,
  children,
}) => {
  return (
    <button
      className={styles.button}
      onClick={onClick}
      disabled={disabled}
    >
      {children}
    </button>
  );
};
```

#### 3. Build React Native Version

```tsx
// React Native Button (packages/react-native-ui/src/components/Button.tsx)
import { Pressable, Text, StyleSheet } from 'react-native';
import { ButtonVariant, ComponentSize } from '@toyota/core';
import { lightTokens } from '@toyota/design-tokens/js/light';

interface ButtonProps {
  variant?: ButtonVariant;
  size?: ComponentSize;
  disabled?: boolean;
  onPress?: () => void;
  children: React.ReactNode;
}

const Button: React.FC<ButtonProps> = ({
  variant = ButtonVariant.Primary,
  size = ComponentSize.Medium,
  disabled = false,
  onPress,
  children,
}) => {
  return (
    <Pressable
      onPress={onPress}
      disabled={disabled}
      style={[
        styles.button,
        styles[variant],
        styles[size],
        disabled && styles.disabled,
      ]}
    >
      <Text style={styles.text}>{children}</Text>
    </Pressable>
  );
};

const styles = StyleSheet.create({
  button: {
    borderRadius: parseInt(lightTokens.borderRadius.md),
    alignItems: 'center',
    justifyContent: 'center',
  },
  primary: {
    backgroundColor: lightTokens.color.primary,
  },
  secondary: {
    backgroundColor: lightTokens.color.secondary,
  },
  // ... more styles
});
```

## Key Differences: Web vs React Native

### Element Mapping

| Web | React Native | Notes |
|-----|--------------|-------|
| `<button>` | `<Pressable>` | Use Pressable for better control |
| `<input>` | `<TextInput>` | Different props (e.g., `type` â†’ `keyboardType`) |
| `<div>` | `<View>` | Layout container |
| `<p>`, `<span>` | `<Text>` | All text must be in `<Text>` |

### Event Handling

| Web | React Native | Notes |
|-----|--------------|-------|
| `onClick` | `onPress` | Main interaction |
| `:hover` | `onPressIn`/`onPressOut` | Hover states |
| `:active` | `pressed` state | Active states |
| `:focus` | `onFocus`/`onBlur` | Focus states |

### Styling

| Web | React Native | Notes |
|-----|--------------|-------|
| CSS Modules | `StyleSheet.create()` | Different syntax |
| `className` | `style` prop | Style application |
| CSS variables | Direct token values | No CSS variables |
| `var(--color-primary)` | `lightTokens.color.primary` | Token usage |

## AI-Assisted Development

### Using Component Metadata

The `@toyota/core` package includes metadata for each component to help AI translate web â†’ native:

```typescript
import { ButtonMetadata } from '@toyota/core/metadata';

// AI prompt example:
// "Using ButtonMetadata, create a React Native Button that matches
// the web implementation, following the conversionNotes and stateMapping"
```

### Metadata Structure

Each component metadata includes:

- **componentName**: Name of the component
- **category**: Type (interaction, form, display, etc.)
- **platform**: Web and native implementation details
- **props**: Prop definitions with types and defaults
- **stateMapping**: How states map between platforms
- **styling**: Styling approach for each platform
- **conversionNotes**: Step-by-step translation guide
- **example**: Code examples for both platforms

## Dark Mode Support

```jsx
import { useColorScheme } from 'react-native';
import { lightTokens } from '@toyota/design-tokens/js/light';
import { darkTokens } from '@toyota/design-tokens/js/dark';

const MyComponent = () => {
  const colorScheme = useColorScheme();
  const tokens = colorScheme === 'dark' ? darkTokens : lightTokens;

  return (
    <View style={{ backgroundColor: tokens.color.background }}>
      <Text style={{ color: tokens.color.text.primary }}>
        Hello World
      </Text>
    </View>
  );
};
```

## Best Practices

### âœ… Do

- Use shared enums from `@toyota/core`
- Import design tokens from `@toyota/design-tokens/js`
- Follow web component API where possible
- Read component metadata before starting
- Keep same prop names (except onClick â†’ onPress)
- Use TypeScript for type safety

### âŒ Don't

- Hardcode colors, spacing, or typography
- Use different prop names unnecessarily
- Skip reading web implementation
- Ignore component metadata
- Create platform-specific enums

## Testing

```jsx
import { render, fireEvent } from '@testing-library/react-native';
import { Button } from '@toyota/react-native-ui';
import { ButtonVariant } from '@toyota/core';

describe('Button', () => {
  it('handles press events', () => {
    const onPress = jest.fn();
    const { getByText } = render(
      <Button variant={ButtonVariant.Primary} onPress={onPress}>
        Click Me
      </Button>
    );

    fireEvent.press(getByText('Click Me'));
    expect(onPress).toHaveBeenCalled();
  });
});
```

## Resources

- **Component Metadata**: `packages/core/src/metadata/`
- **Design Tokens**: `packages/design-tokens/`
- **Web Components**: Explore in this Storybook
- **Type Definitions**: `packages/core/src/types/`
- **Enums**: `packages/core/src/enums/`

## Questions?

See the full documentation in:
- `packages/react-native-ui/README.md`
- `packages/core/README.md`
- `packages/design-tokens/README.md`

